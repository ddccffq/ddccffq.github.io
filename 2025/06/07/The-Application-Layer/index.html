

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="任志诚 2023212020">
  <meta name="keywords" content="Computer Network,Application Layer">
  
    <meta name="description" content="Principles of network applicationsApplication architecturesThree Kinds:  Peer to Peer Client-Server hybrid of P2P and Client-Server  Client-ServerClient-Server architecture has following characteristi">
<meta property="og:type" content="article">
<meta property="og:title" content="The Application Layer">
<meta property="og:url" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/index.html">
<meta property="og:site_name" content="ddccffq的技术博客">
<meta property="og:description" content="Principles of network applicationsApplication architecturesThree Kinds:  Peer to Peer Client-Server hybrid of P2P and Client-Server  Client-ServerClient-Server architecture has following characteristi">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Non-Persistent-HTTP.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Request-Format.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Response-Format.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Web-Caches.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/FTP.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/e-mail-system.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/SMTP-example.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Message-Format.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Mail-Access-Protocol.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/POP3.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/DNS-Server.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Iterated-Query.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Recursive-Query.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/DNS-message-format.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Socket-Programming-with-UDP.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/UDPClient-java.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Socket-Programming-with-TCP.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Three-kinds-of-Socket.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/TCP-Socket.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/TCPClient-java.png">
<meta property="og:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Bottleneck%20between%20an%20institutional%20network%20and%20the%20Internet.png">
<meta property="article:published_time" content="2025-06-07T07:22:34.000Z">
<meta property="article:modified_time" content="2025-06-17T02:22:12.000Z">
<meta property="article:author" content="ddccffq">
<meta property="article:tag" content="机器学习,计算机网络,算法,统计学习">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://ddccffq.github.io/2025/06/07/The-Application-Layer/The-Application-Layer/Non-Persistent-HTTP.png">
  
  
  
  <title>The Application Layer - ddccffq的技术博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"ddccffq.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>ddccffq的技术博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Computer Networking, A Top-Down Approach, 5th Edition"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-06-07 15:22" pubdate>
          2025年6月7日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5.9k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          50 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Computer Networking, A Top-Down Approach, 5th Edition</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Principles-of-network-applications"><a href="#Principles-of-network-applications" class="headerlink" title="Principles of network applications"></a>Principles of network applications</h1><h2 id="Application-architectures"><a href="#Application-architectures" class="headerlink" title="Application architectures"></a>Application architectures</h2><p><strong>Three Kinds:</strong></p>
<ul>
<li>Peer to Peer</li>
<li>Client-Server</li>
<li>hybrid of P2P and Client-Server</li>
</ul>
<h3 id="Client-Server"><a href="#Client-Server" class="headerlink" title="Client-Server"></a>Client-Server</h3><p><strong>Client-Server architecture has following characteristics:</strong></p>
<ul>
<li>Server is <strong>always-on</strong> host;</li>
<li>Server has a <strong>permanent IP address</strong>;</li>
<li>Clients do not communicate with each other directly.</li>
</ul>
<blockquote>
<p>clients 之间通过 server 交流。</p>
</blockquote>
<h3 id="Pure-P2P"><a href="#Pure-P2P" class="headerlink" title="Pure P2P"></a>Pure P2P</h3><p>In <strong>P2P architecture</strong>, there is no always-on server, what’s more, arbitrary end systems communicate directly.</p>
<h3 id="Hybrid-of-Client-Server-and-P2P"><a href="#Hybrid-of-Client-Server-and-P2P" class="headerlink" title="Hybrid of Client-Server and P2P"></a>Hybrid of Client-Server and P2P</h3><p>As the name suggests, this architecture is implemented with Client-Server and P2P.</p>
<p><strong>There are two important instance, Skype and QQ</strong></p>
<ul>
<li><strong>Skype:</strong> a voice-over-IP P2P application. If a host A wants to voice another host B, he will get B’s IP address from a server. And then they communicate with each other directly.</li>
<li><strong>QQ:</strong> a chat-over-IP P2P application.</li>
</ul>
<blockquote>
<p>clients 会给 server 提交自己的 IP address。</p>
</blockquote>
<h4 id="Client-Server-部分"><a href="#Client-Server-部分" class="headerlink" title="Client-Server 部分"></a>Client-Server 部分</h4><ul>
<li>用户登录、查找好友、获取在线状态等操作都需要通过<strong>集中服务器</strong>完成。</li>
<li>服务器维护所有用户的索引和状态信息，起到“中介”作用。</li>
</ul>
<h4 id="P2P-部分"><a href="#P2P-部分" class="headerlink" title="P2P 部分"></a>P2P 部分</h4><ul>
<li>当用户之间需要发送即时消息或文件时，<strong>实际数据传输可以直接在用户之间进行</strong>，不经过服务器。</li>
<li>这样可以减轻服务器压力，提高传输效率。</li>
</ul>
<h2 id="Processes-Communicating"><a href="#Processes-Communicating" class="headerlink" title="Processes Communicating"></a>Processes Communicating</h2><p><strong>Process</strong> is a program controlled by <strong>app developer</strong>, running within a host. Within a same host, two processes communicate with each other by <strong>inter-process communication</strong>. Between two hosts, processes communicate with each other by <strong>exchanging messages</strong>. Generally speaking, there are two kinds of processes, they are <strong>client process</strong> and <strong>server process</strong>. Client process initializes a communication, and server process waits to be contacted.</p>
<h2 id="Sockets"><a href="#Sockets" class="headerlink" title="Sockets"></a>Sockets</h2><p>A <strong>door</strong> between application layer and transport layer.</p>
<h2 id="Addressing-Processes"><a href="#Addressing-Processes" class="headerlink" title="Addressing Processes"></a>Addressing Processes</h2><p>To receive message, process must have an <strong>identifier</strong>. Identifier includes both <strong>IP address</strong> and <strong>port numbers</strong> associated with process on host.</p>
<h2 id="App-layer-Protocol-Defines"><a href="#App-layer-Protocol-Defines" class="headerlink" title="App-layer Protocol Defines"></a>App-layer Protocol Defines</h2><p><strong>What does an app-layer protocol define?</strong></p>
<ul>
<li>Type of message exchanged;</li>
<li>Message syntax: what fields in messages and how fields are delineated;</li>
<li>Message semantics: meaning of information in fields;</li>
<li>Rules for when and how a process requests and sends messages.</li>
</ul>
<blockquote>
<p>message 类型、语义、语法、传输时间和方式。</p>
</blockquote>
<p>Generally speaking, there are two sorts of app-layer protocols, they <strong>public-domain protocol</strong> and <strong>proprietary protocol</strong>.</p>
<blockquote>
<p>前者公开后者不公开。</p>
</blockquote>
<h2 id="What-transport-service-dose-an-application-need"><a href="#What-transport-service-dose-an-application-need" class="headerlink" title="What transport service dose an application need?"></a>What transport service dose an application need?</h2><p>We can consider four standards to select transport service.</p>
<ul>
<li>data loss</li>
<li>timing</li>
<li>throughput</li>
<li>security</li>
</ul>
<p>下面是常见的应用类型其需要的传输层服务：</p>
<div style="display: block; margin: 0 auto; width: fit-content">

| **Application**        | **Data Loss**     | **Throughput**                            | **Time Sensitive**       |
|------------------------|-------------------|-------------------------------------------|--------------------------|
| File transfer          | No loss           | Elastic                                   | No                       |
| E-mail                 | No loss           | Elastic                                   | No                       |
| Web documents          | No loss           | Elastic                                   | No                       |
| Real-time audio/video  | Loss-tolerant     | Audio: 5kbps-1Mbps<br>Video: 10kbps-5Mbps | Yes, 100's msec          |
| Stored audio/video     | Loss-tolerant     | Same as above                             | Yes, few secs            |
| Interactive games      | Loss-tolerant     | Few kbps up                               | Yes, 100's msec          |
| Instant messaging      | No loss           | Elastic                                   | Yes and no               |

</div>

<blockquote>
<p>远程医疗手术系统是 requires no data loss and is highly time-sensitive<br>实际上，在当今互联网中，语音和视频流量经常通过 <strong>TCP</strong> 发送，主要原因是<strong>防火墙和 NAT（网络地址转换）设备的兼容性和穿透性更好</strong>。许多防火墙和 NAT 设备默认只允许 TCP 流量通过，而对 UDP 流量进行限制或直接丢弃。这样做是出于安全性和管理的考虑，因为 TCP 连接有明确的建立和关闭过程，便于追踪和控制，而 UDP 是无连接的，容易被滥用。因此，为了确保语音和视频应用能够在各种网络环境下顺利传输数据，开发者往往选择基于 TCP 协议进行数据传输，即使 UDP 在实时性和低延迟方面更有优势。</p>
</blockquote>
<p>下面是常见的应用类型其需要的应用层、传输层协议：</p>
<div style="display: block; margin: 0 auto; width: fit-content">

| **Application**          | **Application Layer Protocol**       | **Underlying Transport Protocol**  |
|--------------------------|--------------------------------------|------------------------------------|
| E-mail                   | SMTP [RFC 2821]                      | TCP                                |
| Remote terminal access   | Telnet [RFC 854]                     | TCP                                |
| Web                      | HTTP [RFC 2616]                      | TCP                                |
| File transfer            | FTP [RFC 959]                        | TCP                                |
| Streaming multimedia     | HTTP (e.g., YouTube), RTP [RFC 1889] | TCP or UDP                         |
| Internet telephony       | SIP, RTP, proprietary (e.g., Skype)  | Typically UDP                      |

</div>

<h1 id="Web-and-HTTP"><a href="#Web-and-HTTP" class="headerlink" title="Web and HTTP"></a>Web and HTTP</h1><p>Web pages consist of some <strong>objects</strong>, each object can be HTML file, Java script and so on. Each object is addressed by a URL, for example, <code>www.someschool.edu/someDept/pic.gif</code>. Among this URL, <code>www.someschool.edu</code> is host name and <code>someDept/pic.gif</code> is path name.</p>
<p><strong>Base HTML-file</strong> is the core of a page. It may includes several referenced objects.</p>
<h2 id="HTTP-Hypertext-Transfer-Protocol"><a href="#HTTP-Hypertext-Transfer-Protocol" class="headerlink" title="HTTP: Hypertext Transfer Protocol"></a>HTTP: Hypertext Transfer Protocol</h2><p><strong>HTTP</strong> is Web’s application protocol with <strong>Client-Server model</strong>. Its transport layer protocol is <strong>TCP</strong>.</p>
<p>HTTP is <strong>stateless</strong>, this means server maintains no information of past clients requests. The reason why protocol that maintains state are complex is that if server or client crashes, their views of “state” may be inconsistent, must be reconciled.</p>
<blockquote>
<p>需要和后文的 cookie 区分开，cookie 并不和 stateless 的性质相违背，原因是：Cookie 只是让状态在客户端和服务器之间传递，而不是让服务器主动维护状态。</p>
</blockquote>
<h3 id="Non-Persistent-HTTP"><a href="#Non-Persistent-HTTP" class="headerlink" title="Non-Persistent HTTP"></a>Non-Persistent HTTP</h3><h4 id="RTT-Round-Trip-Time"><a href="#RTT-Round-Trip-Time" class="headerlink" title="RTT: Round Trip Time"></a>RTT: Round Trip Time</h4><p><img src="The-Application-Layer/Non-Persistent-HTTP.png" srcset="/img/loading.gif" lazyload alt="Non Persistent HTTP">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<p><strong>Definition of $\text{RTT}$:</strong> time for a small packet to travel from client to server and back.</p>
<p>From the picture, we can calculate total time. $\text{total time} = 2 \times \text{RTT} + \text{transmit time}_1$</p>
<h3 id="Persistent-HTTP"><a href="#Persistent-HTTP" class="headerlink" title="Persistent HTTP"></a>Persistent HTTP</h3><p>Persistent HTTP leaves <strong>TCP connection open</strong> after sending response. Client sends request as soon as it encounters a referenced object. As little as one RTT for all the referenced objects. $\text{total time} \approx 3 \times \text{RTT} + \text{transmit time}_1 + \text{transmit time}_2$</p>
<h2 id="HTTP-Message"><a href="#HTTP-Message" class="headerlink" title="HTTP Message"></a>HTTP Message</h2><p>Two types of HTTP message: <strong>request</strong> and <strong>response</strong>. <strong>Sent as ASCII text</strong></p>
<h3 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h3><p><img src="The-Application-Layer/Request-Format.png" srcset="/img/loading.gif" lazyload alt="alt text">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<ol>
<li><strong>Request Line</strong><ul>
<li><strong>Method:</strong> GET, POST, HEAD; PUT, DELETE;<ul>
<li><strong>POST:</strong> Server decides the path;</li>
<li><strong>PUT:</strong> Client decides the path;</li>
</ul>
</li>
<li><strong>URL:</strong> path;</li>
<li><strong>Version:</strong> HTTP version.</li>
</ul>
</li>
<li><strong>Header Lines</strong><ul>
<li><strong>Host:</strong></li>
<li><strong>User-Agent:</strong></li>
<li><strong>Connection:</strong> keep-alive or close;</li>
<li><strong>Accept-Language:</strong> .</li>
</ul>
</li>
<li><strong>Entity Body:</strong></li>
</ol>
<blockquote>
<p>如果是 keep-alive 则是 persistent connection；如果是 close 则是 non-persistent connection。</p>
</blockquote>
<h3 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h3><p><img src="The-Application-Layer/Response-Format.png" srcset="/img/loading.gif" lazyload alt="Response Format">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<p><strong>A few sample codes</strong></p>
<ul>
<li><code>200: OK</code></li>
<li><code>301: Moved Permanently</code></li>
<li><code>400: Bad Request</code></li>
<li><code>404: Not Found</code></li>
<li><code>505: HTTP Version Not Supported</code></li>
</ul>
<h2 id="User-Server-State-Cookies"><a href="#User-Server-State-Cookies" class="headerlink" title="User-Server State: Cookies"></a>User-Server State: Cookies</h2><p><strong>How to set cookies and use cookies?</strong><br>When a client first initialize HTTP TCP connection, server will <strong><code>set cookies</code></strong> in response message’s <strong>Header</strong> filed. After that, each request message from same client will take will <strong><code>cookies</code></strong> in request message <strong>HEADER</strong> filed.</p>
<p><strong>What cookies can bring:</strong></p>
<ul>
<li>authorization</li>
<li>shopping carts</li>
<li>recommendations</li>
<li>user session state (Web e-mail)</li>
</ul>
<p>比如：</p>
<ol>
<li>用户访问电商网站 → 服务器分配并下发 <code>user_id</code> Cookie</li>
<li>用户下单 → 浏览器携带 <code>user_id</code> Cookie → 服务器根据 <code>user_id</code> 更新购买记录</li>
<li>用户后续访问 → 服务器通过 Cookie 识别用户，展示其购买历史</li>
</ol>
<h2 id="Web-Caches"><a href="#Web-Caches" class="headerlink" title="Web Caches"></a>Web Caches</h2><p><strong>Goal</strong>: satisfy client request without involving origin server.</p>
<p><img src="The-Application-Layer/Web-Caches.png" srcset="/img/loading.gif" lazyload alt="Web Caches">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<blockquote>
<p>typically cache is installed by ISP.</p>
</blockquote>
<p><strong>Why Web caching?</strong></p>
<ul>
<li><strong>reduce response time</strong> for client request</li>
<li><strong>reduce traffic</strong> on an institution’s access link.</li>
<li>Internet dense with caches: enables “poor” content providers to effectively deliver content (but so does P2P file sharing)</li>
</ul>
<h3 id="Conditional-GET"><a href="#Conditional-GET" class="headerlink" title="Conditional GET"></a>Conditional GET</h3><p><strong>Goal:</strong> don’t send object if cache has <strong>up-to-date</strong> cached version</p>
<p><strong>cache:</strong> specify date of cached copy in <strong>HTTP request</strong>: <code>If-modified-since: date</code><br><strong>server:</strong> <strong>response</strong> contains no object if cached copy <code>is up-to-date: HTTP/1.0 304 Not Modified</code></p>
<h1 id="FTP-the-File-Transfer-Protocol"><a href="#FTP-the-File-Transfer-Protocol" class="headerlink" title="FTP: the File Transfer Protocol"></a>FTP: the File Transfer Protocol</h1><p><strong>Goal:</strong> File transfers from/to remote host.</p>
<p><img src="The-Application-Layer/FTP.png" srcset="/img/loading.gif" lazyload alt="FTP">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<p>FTP client contacts FTP server at <strong>port 21</strong>, <strong>TCP</strong> is transport protocol. When server receives <strong>file transfer command</strong>, server opens $2^{nd}$ TCP connection for file to client. After transferring one file, server closes data connection. Server opens another TCP data connection to transfer another file.</p>
<p>这是一种 <strong>out-of-band</strong> 的协议。</p>
<ul>
<li><strong>带外（Out-of-band）</strong> 指的是控制信息和数据内容通过<strong>不同的通道</strong>进行传输，而不是混合在同一个通道中。</li>
</ul>
<h2 id="FTP-Commands-Responses"><a href="#FTP-Commands-Responses" class="headerlink" title="FTP Commands, Responses"></a>FTP Commands, Responses</h2><p>Sent as <strong>ASCII text</strong>, response: <strong>status code and phrase</strong>.</p>
<p><strong>Sample commands:</strong></p>
<ul>
<li><code>USER</code> username;</li>
<li><code>PASS</code> password;</li>
<li><code>LIST</code> return list of file in current directory;</li>
<li><code>RETR</code> filename retrieves (gets) file;</li>
<li><code>STOR</code> filename stores (puts) file onto remote host.</li>
</ul>
<p><strong>Sample return codes:</strong></p>
<ul>
<li><code>331</code> Username OK, password required;</li>
<li><code>125</code> data connection already open; transfer starting;</li>
<li><code>425</code> Can’t open data connection;</li>
<li><code>452</code> Error writing file.</li>
</ul>
<h1 id="Electronic-Mail"><a href="#Electronic-Mail" class="headerlink" title="Electronic Mail"></a>Electronic Mail</h1><p><img src="The-Application-Layer/e-mail-system.png" srcset="/img/loading.gif" lazyload alt="e mail system">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<p><strong>Three Major Components:</strong></p>
<ul>
<li>user agents;</li>
<li>mail servers;</li>
<li>simple mail transfer protocol: SMTP.</li>
</ul>
<p><strong>Mail Server</strong></p>
<ul>
<li><strong>mailbox</strong> contains incoming messages for user;</li>
<li><strong>message queue</strong> of outgoing (to be sent) mail messages</li>
<li>SMTP protocol <strong>between mail servers</strong> to send email messages</li>
</ul>
<h2 id="SMTP-Simple-Mail-Transfer-Protocol"><a href="#SMTP-Simple-Mail-Transfer-Protocol" class="headerlink" title="SMTP: Simple Mail Transfer Protocol"></a>SMTP: Simple Mail Transfer Protocol</h2><p><img src="The-Application-Layer/SMTP-example.png" srcset="/img/loading.gif" lazyload alt="SMTP example">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<p><strong>Characteristics:</strong></p>
<ul>
<li>Uses <strong>TCP</strong> to reliably transfer email message from client to server, <strong>port 25</strong>;</li>
<li>Three phases of transfer;<ul>
<li><strong>Handshaking</strong> (Greeting);</li>
<li><strong>Transfer of Messages</strong>;</li>
<li><strong>Closure</strong>.</li>
</ul>
</li>
<li>Command/Response interaction;<ul>
<li>Commands: ASCII text;</li>
<li>Response: status code and phrase.</li>
</ul>
</li>
</ul>
<p><strong>What’s more:</strong></p>
<ul>
<li>SMTP uses <strong>persistent connections</strong>;</li>
<li>SMTP requires message (header &amp; body) to be in <strong>7-bit ASCII</strong>;</li>
<li>SMTP server uses <code>CRLF.CRLF</code> to determine end of message.</li>
</ul>
<p><strong>Comparison with HTTP</strong></p>
<ul>
<li>HTTP: pull; SMTP: push</li>
<li>HTTP: each object encapsulated in its own response msg; SMTP: <strong>multiple objects sent in multipart msg</strong>.</li>
</ul>
<h2 id="Mail-Message-Format"><a href="#Mail-Message-Format" class="headerlink" title="Mail Message Format"></a>Mail Message Format</h2><p><img src="The-Application-Layer/Message-Format.png" srcset="/img/loading.gif" lazyload alt="Message Format">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<h2 id="Mail-Access-Protocols"><a href="#Mail-Access-Protocols" class="headerlink" title="Mail Access Protocols"></a>Mail Access Protocols</h2><p><img src="The-Application-Layer/Mail-Access-Protocol.png" srcset="/img/loading.gif" lazyload alt="Mail Access Protocol">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<ul>
<li>SMTP: <strong>delivery/storage</strong> to receiver’s server;</li>
<li>Mail Access Protocol: <strong>retrieval</strong> from server.</li>
</ul>
<h3 id="POP3-Protocol"><a href="#POP3-Protocol" class="headerlink" title="POP3 Protocol"></a>POP3 Protocol</h3><p><img src="The-Application-Layer/POP3.png" srcset="/img/loading.gif" lazyload alt="POP3">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<p><strong>More about POP3:</strong> Previous example uses “download and delete” mode. Bob cannot re-read e-mail if he changes client;<strong>“Download-and-keep”:</strong> copies of messages on different clients; POP3 is stateless across sessions.</p>
<div style="display: block; margin: 0 auto; width: fit-content">

| 模式                  | 邮件服务器是否保留邮件 | 多终端访问体验         | 适用场景           |
|-----------------------|----------------------|------------------------|--------------------|
| download-and-delete   | 否                   | 仅首台设备可见         | 单一终端、节省空间 |
| download-and-keep     | 是                   | 多终端均可访问         | 多终端、备份安全   |

</div>

<h3 id="IMAP"><a href="#IMAP" class="headerlink" title="IMAP"></a>IMAP</h3><ul>
<li>Keep all messages in one place: <strong>the server</strong>;</li>
<li>Allows user to <strong>organize</strong> messages in folders;</li>
<li>IMAP keeps user state across sessions: names of folders and mappings between message IDs and folder name.</li>
</ul>
<h1 id="DNS-Domain-Name-System"><a href="#DNS-Domain-Name-System" class="headerlink" title="DNS: Domain Name System"></a>DNS: Domain Name System</h1><p>组织的 Web 服务器和邮件服务器能否拥有相同的主机别名？对应的 RR 类型是什么？</p>
<p><strong>可以。</strong><br>一个组织的 Web 服务器和邮件服务器完全可以使用同一个主机别名（如 <code>foo.com</code>）。这是因为 DNS 允许为同一个域名设置不同类型的资源记录（Resource Record, RR），分别指向 Web 服务和邮件服务。</p>
<ul>
<li>当用户在浏览器中访问 <code>http://foo.com</code> 时，DNS 查询的是该域名的 <strong>A 记录</strong>（IPv4 地址）或 <strong>AAAA 记录</strong>（IPv6 地址），用于定位 Web 服务器。</li>
<li>当发送邮件到 <code>user@foo.com</code> 时，邮件系统会查询该域名的 <strong>MX 记录</strong>，用于定位邮件服务器。</li>
</ul>
<div style="display: block; margin: 0 auto; width: fit-content">

| 记录类型 | 作用说明                         |
|----------|----------------------------------|
| A        | 域名到 IPv4 地址（Web 服务器）   |
| MX       | 域名到邮件服务器主机名（邮件服务）|

</div>

<p><strong>Hostname to IP address translation</strong></p>
<h2 id="Distributed-Hierarchical-Database"><a href="#Distributed-Hierarchical-Database" class="headerlink" title="Distributed, Hierarchical Database"></a>Distributed, Hierarchical Database</h2><p><img src="The-Application-Layer/DNS-Server.png" srcset="/img/loading.gif" lazyload alt="alt text">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<h3 id="Top-Level-Domain-TLD-Servers"><a href="#Top-Level-Domain-TLD-Servers" class="headerlink" title="Top-Level Domain (TLD) Servers"></a>Top-Level Domain (TLD) Servers</h3><ul>
<li>Responsible for com, org, net, edu, etc, and all top-level country domains uk, fr, ca, jp;</li>
<li><strong>Network Solutions(a company)</strong> maintains servers for com TLD;</li>
<li><strong>Educause(an institution)</strong> for edu TLD</li>
</ul>
<h3 id="Authoritative-DNS-Servers"><a href="#Authoritative-DNS-Servers" class="headerlink" title="Authoritative DNS Servers"></a>Authoritative DNS Servers</h3><p>Organization’s DNS servers, providing authoritative <strong>hostname to IP mappings</strong> for organization’s servers (e.g., Web, mail). Can be maintained by organization or service provider.</p>
<h3 id="Local-Name-Server"><a href="#Local-Name-Server" class="headerlink" title="Local Name Server"></a>Local Name Server</h3><ul>
<li>Does not strictly belong to hierarchy;</li>
<li>Each <strong>ISP</strong> (residential ISP, company, university) has one;</li>
<li>When host makes DNS query, query is sent to its local DNS server.</li>
</ul>
<h2 id="DNS-Name-Resolution"><a href="#DNS-Name-Resolution" class="headerlink" title="DNS Name Resolution"></a>DNS Name Resolution</h2><h3 id="Iterated-Query"><a href="#Iterated-Query" class="headerlink" title="Iterated Query"></a>Iterated Query</h3><p><img src="The-Application-Layer/Iterated-Query.png" srcset="/img/loading.gif" lazyload alt="alt text">{style=”display: block; margin: 0 auto; width: 70%”}</p>
<h3 id="Recursive-Query"><a href="#Recursive-Query" class="headerlink" title="Recursive Query"></a>Recursive Query</h3><p><img src="The-Application-Layer/Recursive-Query.png" srcset="/img/loading.gif" lazyload alt="alt text">{style=”display: block; margin: 0 auto; width: 70%”}</p>
<h2 id="DNS-Caching-and-Updating-Records"><a href="#DNS-Caching-and-Updating-Records" class="headerlink" title="DNS: Caching and Updating Records"></a>DNS: Caching and Updating Records</h2><ul>
<li>Once (any) name server learns mapping, it caches mapping;</li>
<li>Cache entries timeout (disappear) after some time;</li>
<li><strong>TLD servers</strong> typically cached in local name servers. Thus root name servers not often visited.</li>
</ul>
<h3 id="DNS-records"><a href="#DNS-records" class="headerlink" title="DNS records"></a>DNS records</h3><p>DNS: distributed db storing <strong>resource records (RR)</strong>.</p>
<p>RR format: <code>(name, value, type, ttl)</code>.</p>
<div style="display: block; margin: 0 auto; width: fit-content">

| **Type**   | **Name**                    | **Value**                                     | **Description**                               |
|------------|-----------------------------|-----------------------------------------------|-----------------------------------------------|
| **A**      | Hostname                    | IP address                                    | Maps hostname to IP address                   |
| **NS**     | Domain (e.g., `foo.com`)    | Hostname of authoritative name server         | Specifies authoritative name server for domain|
| **CNAME**  | Alias name                  | Canonical name                                | Maps alias to canonical (real) name           |
| **MX**     | Domain name                 | Mail server name                              | Specifies mail server associated with domain  |

</div>

<h2 id="DNS-Protocol-Messages"><a href="#DNS-Protocol-Messages" class="headerlink" title="DNS Protocol, Messages"></a>DNS Protocol, Messages</h2><p>DNS protocol : <strong>query</strong> and <strong>reply</strong> messages, both with <strong>same message format</strong>.</p>
<p><img src="The-Application-Layer/DNS-message-format.png" srcset="/img/loading.gif" lazyload alt="alt text">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<p><strong>Identification:</strong> 16 bit <code>#</code> for query, reply to query uses same <code>#</code>.</p>
<p><strong>Flags:</strong></p>
<ul>
<li>query or reply;</li>
<li>recursion desired;</li>
<li>recursion available;</li>
<li>reply is authoritative.</li>
</ul>
<h1 id="P2P-applications"><a href="#P2P-applications" class="headerlink" title="P2P applications"></a>P2P applications</h1><h2 id="Pure-P2P-Architecture"><a href="#Pure-P2P-Architecture" class="headerlink" title="Pure P2P Architecture"></a>Pure P2P Architecture</h2><h3 id="File-Distribution-Server-Client-vs-P2P"><a href="#File-Distribution-Server-Client-vs-P2P" class="headerlink" title="File Distribution: Server-Client vs P2P"></a>File Distribution: Server-Client vs P2P</h3><ul>
<li>$u_s$: server upload bandwidth;</li>
<li>$u_i$: peer i upload bandwidth;</li>
<li>$d_i$: peer i download bandwidth;</li>
<li>$F$: file size.</li>
</ul>
<p><strong>Question: How much time to distribute file from one server to $N$ peers?</strong></p>
<p><strong>Answer with Client-Server</strong></p>
<script type="math/tex; mode=display">
t_{cs} = \max \left \{\frac{NF}{u_s}, \frac{F}{d_i} \right \} \tag{1}</script><p><strong>Answer with P2P</strong></p>
<script type="math/tex; mode=display">
t_{p2p} = \max \left \{\frac{F}{u_s}, \frac{F}{d_i}, \frac{NF}{u_s + \sum_{i} u_i} \right \} \tag{2}</script><h3 id="BitTorrent"><a href="#BitTorrent" class="headerlink" title="BitTorrent"></a>BitTorrent</h3><p>基于 <strong>tit-for-tat</strong> （互惠）策略鼓励节点之间公平交换。每个节点会优先向那些<strong>当前向自己上传速度最快的节点</strong>上传数据块。</p>
<p>但是，即使 Alice 在 30 秒内持续向 Bob 上传数据块，Bob 也<strong>不一定会在同一时间段内回馈 Alice</strong>，原因如下：</p>
<ol>
<li><strong>带宽和资源限制</strong>：Bob 可能已经将上传带宽分配给了其他上传速度更快或更优先的 peer。</li>
<li><strong>块的可用性</strong>：Bob 可能没有 Alice 需要的数据块，无法立即回馈。</li>
<li><strong>策略调整延迟</strong>：BitTorrent 的“互惠”是基于一段时间内的统计结果，回馈行为可能会有延迟。</li>
<li><strong>乐善好施（optimistic unchoking）</strong>：每隔一段时间，客户端会随机选择一个 peer 上传数据块，以发现潜在的更优互惠对象，这也可能导致回馈不及时。</li>
</ol>
<p>上述 4. 解决了新加入节点启动问题。</p>
<h3 id="Skype"><a href="#Skype" class="headerlink" title="Skype"></a>Skype</h3><div style="display: block; margin: 0 auto; width: fit-content">

| 功能                   | 说明                                                         |
|------------------------|--------------------------------------------------------------|
| 用户查找与登录         | 通过 P2P 网络分布式存储和查找用户信息                        |
| 媒体数据的传输         | 语音、视频、文件等数据优先点对点传输，必要时通过中继节点转发   |

</div>

<h1 id="Socket-programming"><a href="#Socket-programming" class="headerlink" title="Socket programming"></a>Socket programming</h1><p><strong>Goal:</strong> learn how to <strong>build Client-Server application</strong> that communicate using sockets.</p>
<h2 id="Definition-of-Socket"><a href="#Definition-of-Socket" class="headerlink" title="Definition of Socket"></a>Definition of Socket</h2><p><strong>An application-created, OS-controlled interface (a “door”) into which application process can both send and receive messages to/from another application process.</strong></p>
<h2 id="Socket-Programming-with-UDP"><a href="#Socket-Programming-with-UDP" class="headerlink" title="Socket Programming with UDP"></a>Socket Programming with UDP</h2><p><img src="The-Application-Layer/Socket-Programming-with-UDP.png" srcset="/img/loading.gif" lazyload alt="alt text">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<h3 id="UDPClient-java"><a href="#UDPClient-java" class="headerlink" title="UDPClient.java"></a>UDPClient.java</h3><p><img src="The-Application-Layer/UDPClient-java.png" srcset="/img/loading.gif" lazyload alt="alt text">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<h2 id="Socket-programming-with-TCP"><a href="#Socket-programming-with-TCP" class="headerlink" title="Socket programming with TCP"></a>Socket programming with TCP</h2><p><img src="The-Application-Layer/Socket-Programming-with-TCP.png" srcset="/img/loading.gif" lazyload alt="alt text">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<p><img src="The-Application-Layer/Three-kinds-of-Socket.png" srcset="/img/loading.gif" lazyload alt="alt text">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<p><img src="The-Application-Layer/TCP-Socket.png" srcset="/img/loading.gif" lazyload alt="alt text">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<h3 id="TCPClient-java"><a href="#TCPClient-java" class="headerlink" title="TCPClient.java"></a>TCPClient.java</h3><p><img src="The-Application-Layer/TCPClient-java.png" srcset="/img/loading.gif" lazyload alt="alt text">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<h1 id="End-of-chapter-exercises"><a href="#End-of-chapter-exercises" class="headerlink" title="End-of-chapter exercises"></a>End-of-chapter exercises</h1><h2 id="R-1"><a href="#R-1" class="headerlink" title="R.1"></a>R.1</h2><p>List five nonproprietary Internet applications and the application-layer protocols that they use.</p>
<div style="display: block; margin: 0 auto; width: fit-content">

| **Type**              | **Protocol(s)**             |
|:---------------------:|:---------------------------:|
| Email                 | SMTP, IMAP, POP3            |
| Web Browser           | HTTP                        |
| File Transfer         | FTP                         |
| Domain Name Resolution| DNS                         |
| Remote Terminal Access| SSH, Telnet                 |

</div>

<h2 id="R-2"><a href="#R-2" class="headerlink" title="R.2"></a>R.2</h2><p>What is the difference between network architecture and application architecture?（不太理解这里的 network architecture，默认和 application architecture 一样，都指的是在一个 OSI layer）</p>
<div style="display: block; margin: 0 auto; width: fit-content">

| **Aspect**            | **Network Architecture**                                                                 | **Application Architecture**                                                                 |
|-----------------------|------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------|
| **Definition**        | Describes the organization of network layers and components for data transmission.       | Describes how application components interact to achieve specific functionalities.           |
| **Focus**             | Focuses on data transmission methods, routing, switching, and protocol stacks.           | Focuses on the logical structure and communication patterns of applications.                 |
| **Scope**             | Concerned with the entire network, including physical, data link, and network layers.    | Concerned with the application layer and its communication between processes.                |
| **Examples**          | Virtual circuit networks, datagram networks.                                             | Client-server model, P2P model (e.g., Skype, HTTP).                                          |

</div>

<h2 id="R-6"><a href="#R-6" class="headerlink" title="R.6"></a>R.6</h2><p>Suppose you wanted to do a transaction from a remote client to a server as fast as possible. Would you use UDP or TCP? Why?</p>
<ul>
<li>对于<strong>简单、小型且允许失败的事务</strong>（如状态查询、监控数据上报），可以选择<strong>UDP</strong></li>
<li>对于<strong>大多数商业事务</strong>（如金融交易、数据库操作），应选择<strong>TCP</strong>，因为：<ul>
<li>事务的<strong>完整性和正确性</strong>通常比速度更重要</li>
<li>TCP的<strong>可靠性保障</strong>减少了应用层的复杂度</li>
<li>虽然TCP建立连接有开销，但对于事务的整体成功率和效率更有保障</li>
<li>在现代网络环境中，<strong>TCP连接建立的时延</strong>相对事务处理总时间通常可以接受</li>
</ul>
</li>
<li>但题目要求 <strong>as fast as possible</strong>，所以还是用 <strong>UDP</strong>。</li>
</ul>
<h2 id="R-17"><a href="#R-17" class="headerlink" title="R.17"></a>R.17</h2><p>Print out the header of an e-mail message you have recently received. How many <code>Received:</code> header lines are there? Analyze each of the header lines in the message.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Received: from codeforces.com (mx2.codeforces.com [77.234.215.195])<br>        by newxmmxszgpub6-1.qq.com (NewMX) with SMTP id BF70781A<br>        for &lt;1xx575xxxx@qq.com&gt;; Sat, 17 May 2025 00:47:55 +0800<br>Received: from localhost (gauss.codeforces.com [192.168.10.103])<br>        by codeforces.com (Postfix) with ESMTP id D7D9F322729C1<br>        for &lt;1xx575xxxx@qq.com&gt;; Fri, 16 May 2025 18:48:56 +0300 (MSK)<br>From: &quot;Codeforces@codeforces.com&quot; &lt;Codeforces@codeforces.com&gt;<br>To: &quot;1xx575xxxx@qq.com&quot; &lt;1xx575xxxx@qq.com&gt;<br>Subject: Codeforces Round 1025 (Div. 2)<br></code></pre></td></tr></table></figure>
<p>There are $2$ <code>Received:</code> header lines.</p>
<p>The first part is:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Received: from codeforces.com (mx2.codeforces.com [77.234.215.195])<br>        by newxmmxszgpub6-1.qq.com (NewMX) with SMTP id BF70781A<br>        for &lt;1xx575xxxx@qq.com&gt;; Sat, 17 May 2025 00:47:55 +0800<br></code></pre></td></tr></table></figure>
<ul>
<li><code>Received: from codeforces.com (mx2.codeforces.com [77.234.215.195])</code>: The email was sent from the Codeforces mail server with public IP.</li>
<li><code>by newxmmxszgpub6-1.qq.com (NewMX)</code>: Received by QQ Mail’s mail server.</li>
<li>Using <strong>SMTP</strong> protocol, <code>Date\Time</code>: <code>Sat, 17 May 2025 00:47:55 +0800</code>.</li>
<li>其中的 <code>mx2</code> 指的是 <strong>Mail eXchanger 2</strong>，即 codeforces 的第二台邮件交换 server。</li>
</ul>
<p>The second part is:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Received: from localhost (gauss.codeforces.com [192.168.10.103])<br>        by codeforces.com (Postfix) with ESMTP id D7D9F322729C1<br>        for &lt;1xx575xxxx@qq.com&gt;; Fri, 16 May 2025 18:48:56 +0300 (MSK)<br></code></pre></td></tr></table></figure>
<ul>
<li><code>Received: from localhost (gauss.codeforces.com [192.168.10.103])</code>: The email originated from the local server named <code>gauss.codeforces.com</code> (internal IP).</li>
<li><code>by codeforces.com (Postfix)</code>: Received by the main Codeforces mail server using Postfix.</li>
<li>Using <strong>ESMTP</strong> protocol.</li>
</ul>
<ol>
<li><p><strong>邮件头传输顺序说明</strong>：邮件头按照邮件传输的<strong>相反顺序</strong>排列（最新的记录在最上面）。因此第二个<code>Received</code>行实际上是邮件传输的<strong>起始点</strong>，第一个是<strong>最后一跳</strong>。</p>
</li>
<li><p><strong>时区分析</strong>：注意到两个头部行的时间戳不同:</p>
<ul>
<li>第一个记录: <code>Sat, 17 May 2025 00:47:55 +0800</code>(中国时区)</li>
<li>第二个记录: <code>Fri, 16 May 2025 18:48:56 +0300</code>(莫斯科时区MSK)<br>这说明邮件确实是从俄罗斯发往中国的，时间差符合时区差异。</li>
</ul>
</li>
<li><p><strong>ESMTP vs SMTP的区别</strong>：第二个头部使用ESMTP(扩展SMTP)而不是普通SMTP，这表明使用了更多高级功能(如身份验证、加密等)。</p>
</li>
</ol>
<h2 id="R-22"><a href="#R-22" class="headerlink" title="R.22"></a>R.22</h2><p>What is an overlay network? Does it include routers? What are the edges in the overlay network? How is the query-flooding overlay network created and maintained?</p>
<p>An <strong>overlay network</strong> is a virtual network built on top of an existing physical network. It consists of logical connections (or “edges”) between nodes, which are typically end systems or hosts. These logical connections are established using the underlying physical network infrastructure.</p>
<ul>
<li><p><strong>Does it include routers?</strong><br>No, an overlay network does not include physical routers. Instead, the nodes in the overlay network are typically end systems (e.g., computers, servers) that communicate directly with each other using logical links. The physical routers are part of the underlying network and are not explicitly represented in the overlay.</p>
</li>
<li><p><strong>What are the edges in the overlay network?</strong><br>The edges in an overlay network are logical connections between nodes. These connections are established using the underlying physical network but are abstracted away from the physical topology. For example, in a peer-to-peer (P2P) network, the edges represent direct communication paths between peers.</p>
</li>
<li><p><strong>How is the query-flooding overlay network created and maintained?</strong><br>A query-flooding overlay network is created by connecting nodes in a logical topology where each node knows a subset of other nodes (its neighbors). When a query is initiated, it is broadcasted (or “flooded”) to all neighboring nodes, which in turn forward the query to their neighbors, and so on.<br>Maintenance of the overlay involves:</p>
<ol>
<li><strong>Node discovery:</strong> New nodes join the network by discovering existing nodes and establishing connections.</li>
<li><strong>Topology updates:</strong> Nodes periodically update their neighbor lists to reflect changes in the network (e.g., nodes joining or leaving).</li>
<li><strong>Failure handling:</strong> Mechanisms are implemented to detect and recover from node or connection failures to ensure the overlay remains functional.</li>
</ol>
</li>
</ul>
<h2 id="R-28"><a href="#R-28" class="headerlink" title="R.28"></a>R.28</h2><p>For the client-server application over TCP described in Section $2.7$, why must the server program be executed before the client program? For the clientserver application over UDP described in Section $2.8$, why may the client program be executed before the server program?</p>
<ul>
<li><strong>For the TCP client-server application (Section $2.7$):</strong><br>The server program must be executed before the client because the server needs to create a socket, bind it to a port, and listen for incoming connections. If the client starts first, it will try to connect to the server’s port, but if the server isn’t running and listening yet, the connection will fail.</li>
<li><strong>For the UDP client-server application (Section $2.8$):</strong><br>The client program may be executed before the server because UDP is connectionless. The client can send a datagram to the server’s address and port even if the server isn’t running yet; the datagram may be lost, but the client doesn’t need to establish a connection first. When the server starts, it can immediately receive any new datagrams sent to its port.</li>
</ul>
<h2 id="P-4"><a href="#P-4" class="headerlink" title="P.4"></a>P.4</h2><p>Consider the following string of ASCII characters that were captured by Wireshark when the browser sent an HTTP <code>GET</code> message (i.e., this is the actual content of an HTTP <code>GET</code> message). The characters <code>&lt;cr&gt;&lt;lf&gt;</code> are carriage return and line-feed characters (that is, the italized character string <code>&lt;cr&gt;</code> in the text below represents the single carriage-return character that was contained at that point in the HTTP header). Answer the following questions, indicating where in the HTTP GET message below you find the answer.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">GET /cs453/index.html HTTP/1.1&lt;cr&gt;&lt;lf&gt;Host: gai<br>a.cs.umass.edu&lt;cr&gt;&lt;lf&gt;User-Agent: Mozilla/5.0 (<br>Windows;U; Windows NT 5.1; en-US; rv:1.7.2) Gec<br>ko/20040804 Netscape/7.2 (ax) &lt;cr&gt;&lt;lf&gt;Accept:ex<br>t/xml, application/xml, application/xhtml+xml, text<br>/html;q=0.9, text/plain;q=0.8,image/png,*/*;q=0.5<br>&lt;cr&gt;&lt;lf&gt;Accept-Language: en-us,en;q=0.5&lt;cr&gt;&lt;lf&gt;Accept-<br>Encoding: zip,deflate&lt;cr&gt;&lt;lf&gt;Accept-Charset: ISO<br>-8859-1,utf-8;q=0.7,*;q=0.7&lt;cr&gt;&lt;lf&gt;Keep-Alive: 300&lt;cr&gt;<br>&lt;lf&gt;Connection:keep-alive&lt;cr&gt;&lt;lf&gt;&lt;cr&gt;&lt;lf&gt;<br></code></pre></td></tr></table></figure>
<p><strong>Questions:</strong></p>
<p>a. What is the URL of the document requested by the browser?<br>b. What version of HTTP is the browser running?<br>c. Does the browser request a non-persistent or a persistent connection?<br>d. What is the IP address of the host on which the browser is running?<br>e. What type of browser initiates this message? Why is the browser type needed in an HTTP request message?</p>
<p><strong>Answers:</strong></p>
<p><strong>a. What is the URL of the document requested by the browser?</strong></p>
<ul>
<li><code>http://gaia.cs.umass.edu/cs453/index.html</code>.</li>
</ul>
<p><strong>b. What version of HTTP is the browser running?</strong></p>
<ul>
<li><code>HTTP/1.1</code></li>
</ul>
<p><strong>c. Does the browser request a non-persistent or a persistent connection?</strong></p>
<ul>
<li><code>Connection:keep-alive</code>: a persistent connection.</li>
</ul>
<p><strong>d. What is the IP address of the host on which the browser is running?</strong></p>
<ul>
<li>The IP address of the host is not explicitly provided in the HTTP GET message. It would typically be determined by examining the network layer (IP) headers in the packet capture, which are not included in the provided data.</li>
</ul>
<p><strong>e. What type of browser initiates this message? Why is the browser type needed in an HTTP request message?</strong>  </p>
<ul>
<li>The browser type is <code>Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)</code>.  </li>
<li>The browser type is included in the <code>User-Agent</code> header. It is needed in an HTTP request message to allow the server to tailor its response based on the browser’s capabilities, such as supported features, rendering engine, or platform-specific optimizations.</li>
</ul>
<h2 id="P-5"><a href="#P-5" class="headerlink" title="P.5"></a>P.5</h2><p>The text below shows the reply sent from the server in response to the HTTP <code>GET</code> message in the question above. Answer the following questions, indicating where in the message below you find the answer.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">HTTP/1.1 200 OK&lt;cr&gt;&lt;lf&gt;Date: Tue, 07 Mar 2008<br>12:39:45GMT&lt;cr&gt;&lt;lf&gt;Server: Apache/2.0.52 (Fedora)<br>&lt;cr&gt;&lt;lf&gt;Last-Modified: Sat, 10 Dec2005 18:27:46<br>GMT&lt;cr&gt;&lt;lf&gt;ETag: &quot;526c3-f22-a88a4c80&quot;&lt;cr&gt;&lt;lf&gt;Accept-<br>Ranges: bytes&lt;cr&gt;&lt;lf&gt;Content-Length: 3874&lt;cr&gt;&lt;lf&gt;<br>Keep-Alive: timeout=max=100&lt;cr&gt;&lt;lf&gt;Connection:<br>Keep-Alive&lt;cr&gt;&lt;lf&gt;Content-Type: text/html; charset=<br>ISO-8859-1&lt;cr&gt;&lt;lf&gt;&lt;cr&gt;&lt;lf&gt;&lt;!doctype html public &quot;-<br>//w3c//dtd html 4.0 transitional//en&quot;&gt;&lt;lf&gt;&lt;html&gt;&lt;lf&gt;<br>&lt;head&gt;&lt;lf&gt; &lt;meta http-equiv=&quot;Content-Type&quot;<br>content=&quot;text/html; charset=iso-8859-1&quot;&gt;&lt;lf&gt; &lt;meta<br>name=&quot;GENERATOR&quot; content=&quot;Mozilla/4.79 [en] (Windows NT<br>5.0; U) Netscape&quot;&gt;&lt;lf&gt; &lt;title&gt;CMPSCI 453 / 591 /<br>NTU-ST550A Spring 2005 homepage&lt;/title&gt;&lt;lf&gt;&lt;/head&gt;&lt;lf&gt;<br>&lt;much more document text following here (not shown)&gt;<br></code></pre></td></tr></table></figure>
<p><strong>Questions and Answers:</strong></p>
<p><strong>a. Was the server able to successfully find the document or not? What time was the document reply provided?</strong></p>
<ul>
<li><code>200 OK</code>: successfully find the document; <code>Tue, 07 Mar2008 12:39:45</code></li>
</ul>
<p><strong>b. When was the document last modified?</strong></p>
<ul>
<li><code>Last-Modified: Sat, 10 Dec2005 18:27:46</code></li>
</ul>
<p><strong>c. How many bytes are there in the document being returned?</strong></p>
<ul>
<li><code>Ranges: bytes&lt;cr&gt;&lt;lf&gt;Content-Length: 3874</code>: $3874$ bytes.</li>
</ul>
<p><strong>d. What are the first 5 bytes of the document being returned? Did the server agree to a persistent connection?</strong></p>
<ul>
<li><strong>First 5 bytes of the document:</strong> <code>&lt;!doc</code> (from the document content starting with <code>&lt;!doctype html public...</code>). 所选的 HTTP 报文内容声明了 <code>Content-Type: text/html; charset=ISO-8859-1</code>，该编码是单字节编码（每个字符 1 字节）</li>
<li><strong>Persistent connection:</strong> Yes, the server agreed to a persistent connection as indicated by the header <code>Connection: Keep-Alive</code>.</li>
</ul>
<h2 id="P-9"><a href="#P-9" class="headerlink" title="P.9"></a>P.9</h2><p>Consider Figure $2.12$, for which there is an institutional network connected to the Internet. Suppose that the average object size is $850,000$ bits and that the average request rate from the institution’s browsers to the origin servers is $16$ requests per second. Also suppose that the amount of time it takes from when the router on the Internet side of the access link forwards an HTTP request until it receives the response is $3$ seconds on average (see $\text{Section}$ $2.2.5$). <strong>Model the total average response time as the sum of the average access delay (that is, the delay from Internet router to institution router) and the average Internet delay</strong>. For the average access delay, use $\Delta / (1 - \Delta \beta)$, where $\Delta$ is the average time required to send an object over the access link and $\beta$ is the arrival rate of objects to the access link.</p>
<p><strong>Complement:</strong> $15$ Mbps access link and $100$ Mbps LAN.</p>
<p><img src="The-Application-Layer/Bottleneck between an institutional network and the Internet.png" srcset="/img/loading.gif" lazyload alt="Bottleneck between an institutional network and the Internet">{style=”display: block; margin: 0 auto; width: 90%”}</p>
<p><strong>Questions and Answers:</strong></p>
<p><strong>a. Find the total average response time.</strong></p>
<p>The total average response time is the sum of the <strong>average access delay</strong> and the <strong>average Internet delay</strong>.</p>
<ol>
<li><p><strong>Given data:</strong></p>
<ul>
<li>Average object size: $L = 850,000$ bits</li>
<li>Access link rate: $R = 15$ Mbps</li>
<li>Request rate: $\beta = 16$ requests/second</li>
<li>Average Internet delay: $3$ seconds</li>
</ul>
</li>
<li><p><strong>Calculate $\Delta$:</strong></p>
<script type="math/tex; mode=display">
\Delta = \frac{L}{R} = \frac{850,000}{15 \times 10^6} = 0.0567 \, \text{seconds}</script></li>
<li><p><strong>Calculate average access delay:</strong></p>
<script type="math/tex; mode=display">
\text{Access delay} = \frac{\Delta}{1 - \Delta \beta} = \frac{0.0567}{1 - (0.0567 \times 16)} = \frac{0.0567}{1 - 0.9072} = \frac{0.0567}{0.0928} \approx 0.611 \, \text{seconds}</script></li>
<li><p><strong>Total average response time:</strong></p>
<script type="math/tex; mode=display">
\text{Total response time} = \text{Access delay} + \text{Internet delay} = 0.611 + 3 = 3.611 \, \text{seconds}</script></li>
</ol>
<p><strong>b. Now suppose a cache is installed in the institutional LAN. Suppose the miss rate is $0.4$. Find the total response time.</strong></p>
<ol>
<li><p><strong>Given data:</strong></p>
<ul>
<li>Miss rate: $0.4$</li>
<li>Hit rate: $1 - 0.4 = 0.6$</li>
<li>Access delay (from part a): $0.611$ seconds</li>
<li>Internet delay: $3$ seconds</li>
</ul>
</li>
<li><p><strong>Calculate total response time with caching:</strong></p>
<script type="math/tex; mode=display">
\text{Total response time} = (\text{Hit rate} \times \text{Access delay}) + (\text{Miss rate} \times (\text{Access delay} + \text{Internet delay}))</script><p>Substituting values:</p>
<script type="math/tex; mode=display">
\text{Total response time} = 0.6 \times \frac{850000}{100 \times 10^6} + 0.4 \times (0.611 + 3)</script><script type="math/tex; mode=display">
\text{Total response time} = 0.0051 + 0.4 \times 3.611 = 1.4495 \, \text{s}</script></li>
</ol>
<h2 id="P-15"><a href="#P-15" class="headerlink" title="P.15"></a>P.15</h2><p><strong>Question:</strong></p>
<p>Read RFC $5321$ for SMTP. What does MTA stand for? Consider the following received spam email (modified from a real spam email). Assuming only the originator of this spam email is malacious and all other hosts are honest, identify the malacious host that has generated this spam email.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">From - Fri Nov 07 13:41:30 2008<br>Return-Path: &lt;tennis5@pp33head.com&gt;<br>Received: from barmail.cs.umass.edu<br>(barmail.cs.umass.edu [128.119.240.3]) by cs.umass.edu<br>(8.13.1/8.12.6) for &lt;hg@cs.umass.edu&gt;; Fri, 7 Nov 2008<br>13:27:10 -0500<br>Received: from asusus-4b96 (localhost [127.0.0.1]) by<br>barmail.cs.umass.edu (Spam Firewall) for<br>&lt;hg@cs.umass.edu&gt;; Fri, 7 Nov 2008 13:27:07 -0500<br>(EST)<br>Received: from asusus-4b96 ([58.88.21.177]) by<br>barmail.cs.umass.edu for &lt;hg@cs.umass.edu&gt;; Fri,<br>07 Nov 2008 13:27:07 -0500 (EST)<br>Received: from [58.88.21.177] by<br>inbnd55.exchangeddd.com; Sat, 8 Nov 2008 01:27:07 +0700<br>From: &quot;Jonny&quot; &lt;tennis5@pp33head.com&gt;<br>To: &lt;hg@cs.umass.edu&gt;<br>Subject: How to secure your savings<br></code></pre></td></tr></table></figure>
<p><strong>Answer:</strong></p>
<p><strong>最底部的 <code>Received:</code> 记录代表邮件的最初来源</strong>，即发件人最初连接的主机。</p>
<ul>
<li><p><strong>What does MTA stand for?</strong><br>MTA stands for <strong>Mail Transfer Agent</strong>. It is a software application used to transfer email messages from one server to another using protocols such as SMTP.</p>
</li>
<li><p><strong>Identify the malicious host:</strong><br>To identify the malicious host, we analyze the <code>Received</code> headers in reverse order (from bottom to top), as each <code>Received</code> header represents a hop in the email’s journey.</p>
<ol>
<li><p><strong><code>Received: from [58.88.21.177] by inbnd55.exchangeddd.com</code></strong>  </p>
<ul>
<li>This indicates that the email originated from the IP address <code>58.88.21.177</code>.</li>
</ul>
</li>
<li><p><strong><code>Received: from asusus-4b96 ([58.88.21.177]) by barmail.cs.umass.edu</code></strong>  </p>
<ul>
<li>This confirms that the email was sent from the same IP address <code>58.88.21.177</code>.</li>
</ul>
</li>
<li><p><strong><code>Received: from asusus-4b96 (localhost [127.0.0.1]) by barmail.cs.umass.edu</code></strong>  </p>
<ul>
<li>This shows that the email passed through a local host (<code>127.0.0.1</code>) on the <code>barmail.cs.umass.edu</code> server.</li>
</ul>
</li>
<li><p><strong><code>Received: from barmail.cs.umass.edu (barmail.cs.umass.edu [128.119.240.3]) by cs.umass.edu</code></strong>  </p>
<ul>
<li>This indicates that the email was forwarded by <code>barmail.cs.umass.edu</code> to <code>cs.umass.edu</code>.</li>
</ul>
</li>
</ol>
<p>Based on the analysis, the <strong>malicious host</strong> is the originator of the email, which is the IP address <strong><code>58.88.21.177</code></strong>. This is the source of the spam email.</p>
</li>
</ul>
<h2 id="P-18"><a href="#P-18" class="headerlink" title="P.18"></a>P.18</h2><p><strong>Questions and Answers:</strong></p>
<p><strong>a. What is a whois database?</strong></p>
<p>A <strong>whois database</strong> is a publicly accessible database that contains information about the registered owners of domain names and IP address blocks. It is maintained by domain registrars and regional internet registries (RIRs). The database provides details such as:</p>
<ul>
<li>The name and contact information of the domain owner or organization.</li>
<li>The domain’s registration and expiration dates.</li>
<li>The domain’s associated name servers.</li>
<li>The registrar responsible for the domain.</li>
</ul>
<p>The <strong>whois database</strong> is commonly used for administrative purposes, such as verifying domain ownership, resolving technical issues, or investigating malicious activities.</p>
<p><strong>b. Use various whois databases on the Internet to obtain the names of two DNS servers. Indicate which whois databases you used.</strong></p>
<p>DNS server 的名字，通常指的是域名形式的主机名。</p>
<p>通过在 <a target="_blank" rel="noopener" href="https://lookup.icann.org/">ICANN Lookup</a> 查询 <code>BiliBili.com</code> 得到其 Nameservers</p>
<ul>
<li><code>NS3.DNSV5.COM</code></li>
<li><code>NS4.DNSV5.COM</code></li>
</ul>
<p>通过在 <a target="_blank" rel="noopener" href="https://whois.domaintools.com/">DomainTools</a> 查询 <code>Baidu.com</code> 得到其 Nameservers</p>
<ul>
<li><code>NS1.BAIDU.COM (has 805 domains)</code></li>
<li><code>NS2.BAIDU.COM (has 805 domains)</code></li>
<li><code>NS3.BAIDU.COM (has 805 domains)</code></li>
<li><code>NS4.BAIDU.COM (has 805 domains)</code></li>
<li><code>NS7.BAIDU.COM (has 805 domains)</code></li>
</ul>
<p><strong>c. Use nslookup on your local host to send DNS queries to three DNS servers: your local DNS server and the two DNS servers you found in part (b). Try querying for Type A, NS, and MX reports. Summarize your findings.</strong></p>
<p>我在终端输入的语句及其显示结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">(base) PS C:\Users\17657\Desktop\Github\HEXO&gt; nslookup<br>默认服务器:  UnKnown<br>Address:  10.3.9.5<br><br>&gt; set type=A<br>&gt; www.baidu.com<br>服务器:  UnKnown<br>Address:  10.3.9.5<br><br>非权威应答:<br>名称:    www.a.shifen.com<br>Addresses:  220.181.111.232<br>          220.181.111.1<br>Aliases:  www.baidu.com<br><br>&gt; set type=NS<br>&gt; baidu.com<br>服务器:  UnKnown<br>Address:  10.3.9.5<br><br>非权威应答:<br>baidu.com       nameserver = ns2.baidu.com<br>baidu.com       nameserver = ns7.baidu.com<br>baidu.com       nameserver = ns3.baidu.com<br>baidu.com       nameserver = dns.baidu.com<br>baidu.com       nameserver = ns4.baidu.com<br><br>ns2.baidu.com   internet address = 220.181.33.31<br>ns7.baidu.com   internet address = 180.76.76.92<br>dns.baidu.com   internet address = 110.242.68.134<br>ns3.baidu.com   internet address = 36.155.132.78<br>ns3.baidu.com   internet address = 153.3.238.93<br>ns4.baidu.com   internet address = 14.215.178.80<br>ns4.baidu.com   internet address = 111.45.3.226<br>&gt; set type=MX<br>&gt; baidu.com<br>服务器:  UnKnown<br>Address:  10.3.9.5<br><br>非权威应答:<br>baidu.com       MX preference = 20, mail exchanger = mx.baidu.com<br>baidu.com       MX preference = 10, mail exchanger = mx.maillb.baidu.com<br>&gt; server ns1.baidu.com<br>默认服务器:  ns1.baidu.com<br>Address:  110.242.68.134<br><br>&gt; set type=A<br>&gt; www.baidu.com<br>服务器:  ns1.baidu.com<br>Address:  110.242.68.134<br><br>非权威应答:<br>名称:    www.a.shifen.com<br>Addresses:  220.181.111.1<br>          220.181.111.232<br>Aliases:  www.baidu.com<br><br>&gt; set type=NS<br>&gt; baidu.com<br>服务器:  ns1.baidu.com<br>Address:  110.242.68.134<br><br>非权威应答:<br>baidu.com       nameserver = dns.baidu.com<br>baidu.com       nameserver = ns3.baidu.com<br>baidu.com       nameserver = ns4.baidu.com<br>baidu.com       nameserver = ns2.baidu.com<br>baidu.com       nameserver = ns7.baidu.com<br><br>ns7.baidu.com   internet address = 180.76.76.92<br>ns4.baidu.com   internet address = 14.215.178.80<br>ns4.baidu.com   internet address = 111.45.3.226<br>ns2.baidu.com   internet address = 220.181.33.31<br>ns3.baidu.com   internet address = 36.155.132.78<br>ns3.baidu.com   internet address = 153.3.238.93<br>dns.baidu.com   internet address = 110.242.68.134<br>&gt; set type=MX<br>&gt; baidu.com<br>服务器:  ns1.baidu.com<br>Address:  110.242.68.134<br><br>非权威应答:<br>baidu.com       MX preference = 20, mail exchanger = mx.baidu.com<br>baidu.com       MX preference = 10, mail exchanger = mx.maillb.baidu.com<br>&gt; server ns3.dnsv5.com<br>默认服务器:  ns3.dnsv5.com<br>Addresses:  1.12.0.18<br>          1.12.0.17<br>          43.140.237.52<br>          111.13.203.52<br>          36.155.149.211<br>          101.227.168.52<br>          220.196.136.52<br><br>&gt; set type=A<br>&gt; baidu.com<br>服务器:  ns3.dnsv5.com<br>Addresses:  1.12.0.18<br>          1.12.0.17<br>          43.140.237.52<br>          111.13.203.52<br>          36.155.149.211<br>          101.227.168.52<br>          220.196.136.52<br><br>非权威应答:<br>名称:    baidu.com<br>Addresses:  182.61.201.211<br>          182.61.244.181<br><br>&gt; set type=NS<br>&gt; baidu.com<br>服务器:  ns3.dnsv5.com<br>Addresses:  1.12.0.18<br>          1.12.0.17<br>          43.140.237.52<br>          111.13.203.52<br>          36.155.149.211<br>          101.227.168.52<br>          220.196.136.52<br><br>非权威应答:<br>baidu.com       nameserver = ns4.baidu.com<br>baidu.com       nameserver = ns7.baidu.com<br>baidu.com       nameserver = ns2.baidu.com<br>baidu.com       nameserver = ns3.baidu.com<br>baidu.com       nameserver = dns.baidu.com<br><br>ns7.baidu.com   internet address = 180.76.76.92<br>ns4.baidu.com   internet address = 14.215.178.80<br>ns4.baidu.com   internet address = 111.45.3.226<br>ns2.baidu.com   internet address = 220.181.33.31<br>ns3.baidu.com   internet address = 36.155.132.78<br>ns3.baidu.com   internet address = 153.3.238.93<br>dns.baidu.com   internet address = 110.242.68.134<br>&gt; set type=MX<br>&gt; baidu.com<br>服务器:  ns3.dnsv5.com<br>Addresses:  1.12.0.18<br>          1.12.0.17<br>          43.140.237.52<br>          111.13.203.52<br>          36.155.149.211<br>          101.227.168.52<br>          220.196.136.52<br><br>非权威应答:<br>baidu.com       MX preference = 10, mail exchanger = mx.maillb.baidu.com<br>baidu.com       MX preference = 20, mail exchanger = mx.baidu.com<br></code></pre></td></tr></table></figure>
<p>总结：</p>
<ul>
<li><code>www.baidu.com</code> 和 <code>baidu.com</code> 不是同一个东西。具体来说后者涵盖范围更广。</li>
<li>一个 Nameserver 能有多个 Internet address。</li>
<li><code>type=A</code> 模式返回的是域名的 IPv4 地址。</li>
<li><code>type=NS</code> 模式返回的是 Nameserver 的名字和其 internet address。</li>
<li><code>type=MS</code> 模式返回的是该域名的邮件服务器主机名及优先级。</li>
</ul>
<p><strong>d. Use nslookup to find a Web server that has multiple IP addresses. Does the Web server of your institution (school or company) have multiple IP addresses?</strong></p>
<p>查询 <code>www.bilibili.com</code> 得到结果如下，其有两个 IP address。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&gt; set type=A <br>&gt; www.bilibili.com<br>服务器:  ns3.dnsv5.com<br>Addresses:  1.12.0.18<br>          1.12.0.17<br>          43.140.237.52<br>          111.13.203.52<br>          36.155.149.211<br>          101.227.168.52<br>          220.196.136.52<br><br>非权威应答:<br>名称:    a.w.bilicdn1.com<br>Addresses:  121.194.11.73<br>          121.194.11.72<br>Aliases:  www.bilibili.com<br><br></code></pre></td></tr></table></figure>
<p>貌似我们学校的 web server 只有一个 IP Address</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>&gt; ucloud.bupt.edu.cn<br>服务器:  ns3.dnsv5.com<br>Addresses:  1.12.0.18<br>          1.12.0.17<br>          43.140.237.52<br>          111.13.203.52<br>          36.155.149.211<br>          101.227.168.52<br>          220.196.136.52<br><br>非权威应答:<br>名称:    vn.bupt.edu.cn<br>Address:  10.3.19.2<br>Aliases:  ucloud.bupt.edu.cn<br><br>&gt; auth.bupt.edu.cn<br>服务器:  ns3.dnsv5.com<br>Addresses:  1.12.0.18<br>          1.12.0.17<br>          43.140.237.52<br>          111.13.203.52<br>          36.155.149.211<br>          101.227.168.52<br>          220.196.136.52<br><br>非权威应答:<br>名称:    vn.bupt.edu.cn<br>Address:  10.3.19.2<br>Aliases:  auth.bupt.edu.cn<br><br>&gt; www.bupt.edu.cn<br>服务器:  ns3.dnsv5.com<br>Addresses:  1.12.0.18<br>          1.12.0.17<br>          43.140.237.52<br>          111.13.203.52<br>          36.155.149.211<br>          101.227.168.52<br>          220.196.136.52<br><br>非权威应答:<br>名称:    vn46.bupt.edu.cn<br>Address:  10.3.19.2<br>Aliases:  www.bupt.edu.cn<br></code></pre></td></tr></table></figure>
<p><strong>e. Use the ARIN whois database to determine the IP address range used by your university.</strong></p>
<p>操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>nslookup www.bupt.edu.cn<br>服务器:  UnKnown<br>Address:  10.3.9.5<br><br>非权威应答:<br>名称:    vn46.bupt.edu.cn<br>Addresses:  2001:da8:215:4038::161<br>          10.3.19.2<br>Aliases:  www.bupt.edu.cn<br><br></code></pre></td></tr></table></figure>
<p>这里的 IPv4 地址是子网地址吧？我在 rain 上查询查到了一个美国机构，而且网页也提醒我了 <strong>These addresses are in use by many millions of independently operated networks, which might be as small as a single computer connected to a home gateway, and are automatically configured in hundreds of millions of devices.</strong> 所以我用的是 IPv6 的地址，这个地址能查到，显示：Net Range<br><code>2001:da8:: - 2001:da8:ffff:ffff:ffff:ffff:ffff:ffff</code>。</p>
<p><strong>f. Describe how an attacker can use whois databases and the nslookup tool to perform reconnaissance on an institution before launching an attack.</strong></p>
<p>An attacker 可以用 whois 和 nslookup 干如下的事情：</p>
<ul>
<li><strong>whois 数据库</strong>：公开的域名/IP 注册信息数据库，可查询域名所有者、联系方式、DNS 服务器、IP 地址段等信息。</li>
<li><strong>nslookup 工具</strong>：DNS 查询工具，可用来获取域名解析记录（如 A、NS、MX、CNAME 等），进一步了解目标机构的网络结构和服务部署。</li>
</ul>
<p>从而可以：</p>
<ul>
<li>查询目标机构的域名，获取注册人、联系方式、注册商、DNS 服务器、IP 地址段等信息。</li>
<li>通过 whois 查询 IP 地址，了解目标机构的公网 IP 范围、网络归属、可能的子网划分。</li>
<li>利用这些信息，攻击者可以锁定攻击目标、寻找潜在的弱点（如联系邮箱、技术负责人等）。</li>
<li>查询目标机构域名的 A 记录，获取 Web 服务器等主机的 IP 地址。</li>
<li>查询 NS 记录，了解目标机构使用的权威 DNS 服务器，判断是否存在 DNS 攻击面。</li>
<li>查询 MX 记录，获取邮件服务器信息，可能用于钓鱼邮件、垃圾邮件攻击。</li>
<li>查询 CNAME、TXT 等记录，发现隐藏的服务、第三方集成、邮件安全策略等。</li>
<li>通过对不同子域名的批量查询，发现更多内部服务和主机。</li>
</ul>
<p>进而：</p>
<ul>
<li>绘制目标机构的网络拓扑和服务分布图。</li>
<li>寻找潜在的攻击入口（如暴露的服务器、邮件系统、DNS 服务等）。</li>
<li>为后续的漏洞扫描、社工攻击、钓鱼邮件等攻击手段做准备。</li>
</ul>
<p><strong>g. Discuss why whois databases should be publicly available.</strong></p>
<p>whois数据库作为互联网基础设施的重要组成部分，其公开可用性具有多方面的价值与意义：</p>
<ol>
<li><p><strong>互联网透明度与问责制</strong></p>
<ul>
<li>提供域名和IP地址资源的<strong>所有权透明度</strong>，确保资源分配可追溯</li>
<li>建立互联网资源使用的<strong>公开记录</strong>，减少匿名滥用可能性</li>
<li>符合互联网作为<strong>公共资源</strong>的基本属性，保障公众知情权</li>
</ul>
</li>
<li><p><strong>技术协调与故障排除</strong></p>
<ul>
<li>网络管理员能迅速找到<strong>技术联系人</strong>解决网络问题</li>
<li>跨组织网络协作时提供必要的<strong>联络信息</strong></li>
<li>在安全事件、网络中断等紧急情况下提供<strong>快速响应渠道</strong></li>
</ul>
</li>
<li><p><strong>法律与知识产权保护</strong></p>
<ul>
<li>协助<strong>商标持有者</strong>保护其在线知识产权</li>
<li>为<strong>域名争议解决</strong>提供必要的所有权信息</li>
<li>帮助执法机构<strong>打击网络犯罪</strong>和识别不法行为</li>
</ul>
</li>
<li><p><strong>历史与文化因素</strong></p>
<ul>
<li>符合互联网早期建立的<strong>开放共享精神</strong></li>
<li>继承了学术网络环境下的<strong>信任与协作文化</strong></li>
<li>反映了互联网治理中的<strong>多方参与模式</strong></li>
</ul>
</li>
<li><p><strong>安全与风险的平衡</strong></p>
<ul>
<li>虽然公开信息存在被滥用的风险，但<strong>安全通过隐蔽</strong>不是可持续策略</li>
<li>现代whois服务已引入<strong>数据隐私保护机制</strong>（如代理注册服务）</li>
<li>信息公开带来的<strong>集体安全收益</strong>通常超过个体风险</li>
</ul>
</li>
</ol>
<p>总之，whois数据库的公开可用反映了互联网基于<strong>透明、协作和问责</strong>的核心价值观，在保护隐私和维护网络健康运行之间寻求平衡。尽管存在被攻击者利用的风险，但其对互联网正常运行、问题排除和资源管理的价值仍然超过潜在风险。</p>
<h2 id="P-20"><a href="#P-20" class="headerlink" title="P.20"></a>P.20</h2><p><strong>Question and Answer:</strong><br>Suppose you can access the caches in the local DNS servers of your department. Can you propose a way to roughly determine the Web servers (outside your department) that are most popular among the users in your department? Explain.</p>
<p>To determine the most popular external Web servers among the users in my department, I would propose the following method:</p>
<ol>
<li><p><strong>Access the local DNS server’s cache:</strong></p>
<ul>
<li>The local DNS server maintains a cache of recently resolved domain names and their corresponding IP addresses.</li>
<li>By accessing this cache, I can retrieve a list of domain names that users in my department have recently accessed.</li>
</ul>
</li>
<li><p><strong>Filter out internal domain names:</strong></p>
<ul>
<li>Remove any domain names that belong to the local department or organization.</li>
</ul>
</li>
<li><p><strong>Count the frequency of external domain names:</strong></p>
<ul>
<li>For each external domain name in the cache, count how many times it appears.</li>
<li>This will give an estimate of how frequently users in the department access each external Web server.</li>
</ul>
</li>
<li><p><strong>Identify the most popular Web servers:</strong></p>
<ul>
<li>Sort the external domain names by their access frequency.</li>
<li>The domain names with the highest counts represent the most popular external Web servers among the users in the department.</li>
</ul>
</li>
</ol>
<p><strong>Explanation:</strong><br>This method works because the local DNS server’s cache reflects the browsing behavior of users in the department. By analyzing the cache, we can infer which external Web servers are most frequently accessed. However, this method has limitations, as it only provides a rough estimate and may not account for caching mechanisms in user devices or browsers.</p>
<h2 id="P-22"><a href="#P-22" class="headerlink" title="P.22"></a>P.22</h2><p><strong>Question:</strong></p>
<p>Consider distributing a file of $F = 15$ Gbits to $N$ peers. The server has an upload rate of $u_s = 30$ Mbps, and each peer has a download rate of $d_i = 2$ Mbps and an upload rate of $u$. For $N = 10$, $100$, and $1,000$ and $u = 300$ Kbps, $700$ Kbps, and $2$ Mbps, prepare a chart giving the minimum distribution time for each of the combinations of $N$ and $u$ for both client-server distribution and P2P distribution.</p>
<p><strong>Answer:</strong></p>
<p>To calculate the minimum distribution time for both client-server distribution and P2P distribution, we use the following formulas:</p>
<ol>
<li><p><strong>Client-Server Distribution:</strong></p>
<script type="math/tex; mode=display">
t_{cs} = \max \left\{ \frac{N \cdot F}{u_s}, \frac{F}{d_i} \right\}</script></li>
<li><p><strong>P2P Distribution:</strong></p>
<script type="math/tex; mode=display">
t_{p2p} = \max \left\{ \frac{F}{u_s}, \frac{F}{d_i}, \frac{N \cdot F}{u_s + \sum_{i} u_i} \right\}</script></li>
</ol>
<div style="display: block; margin: 0 auto; width: fit-content">

| $N$      | $u \, \text{Kbps}$ | $t_{cs} \, \text{seconds}$      | $t_{p2p} \, \text{seconds}$         |
|------------|--------------|---------------------------|-------------------------------|
| $10$     | $300$      | $\max\{5000, 7500\} = 7500$  | $\max\{500, 7500, 4545\} = 7500$   |
| $10$     | $700$      | $\max\{5000, 7500\} = 7500$  | $\max\{500, 7500, 4054\} = 7500$ |
| $10$     | $2,000$    | $\max\{5000, 7500\} = 7500$  | $\max\{500, 7500, 3000\} = 7500$ |
| $100$    | $300$      | $\max\{50000, 7500\} = 50000$  | $\max\{500, 7500, 25000\} = 25000$ |
| $100$    | $700$      | $\max\{50000, 7500\} = 50000$  | $\max\{500, 7500, 15000\} = 15000$ |
| $100$    | $2,000$    | $\max\{50000, 7500\} = 50000$  | $\max\{500, 7500, 6522\} = 7500$   |
| $1,000$  | $300$      | $\max\{500000, 7500\} = 500000$| $\max\{500, 7500, 45455\} = 45455$ |
| $1,000$  | $700$      | $\max\{500000, 7500\} = 500000$| $\max\{500, 7500, 20548\} = 20548$ |
| $1,000$  | $2,000$    | $\max\{500000, 7500\} = 500000$| $\max\{500, 7500, 7389\} = 7500$   |

</div>

<ol>
<li><p>当节点数量<strong>较少</strong>（N=10）时，无论使用何种上传速率，<strong>两种分发方式所需时间相同</strong>，均受限于节点的下载速率。</p>
</li>
<li><p>当节点数量<strong>增加</strong>时，客户端-服务器模式的分发时间<strong>显著上升</strong>，而P2P模式在节点上传速率足够高时<strong>效率更高</strong>。</p>
</li>
<li><p>当节点上传速率达到<strong>2 Mbps</strong>时，P2P模式的分发时间在各种节点数下都可以保持在<strong>较低水平</strong>，这显示了P2P架构在大规模分发时的优势。</p>
</li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Computer-Network/" class="category-chain-item">Computer Network</a>
  
  
    <span>></span>
    
  <a href="/categories/Computer-Network/Application-Layer/" class="category-chain-item">Application Layer</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>The Application Layer</div>
      <div>https://ddccffq.github.io/2025/06/07/The-Application-Layer/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>任志诚 2023212020</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年6月7日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/06/08/The-Transport-Layer/" title="The Transport Layer">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">The Transport Layer</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/06/05/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E5%8F%8A%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E6%A6%82%E8%AE%BA/" title="统计学习及监督学习概论">
                        <span class="hidden-mobile">统计学习及监督学习概论</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
